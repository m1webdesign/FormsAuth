@model System.Collections.Generic.List<MB.Models.POCO.BookingInfo>

<table class="traditional">
    <tbody>

        @foreach(var bookinginfo in Model)
        {
            <tr>
                @if(bookinginfo.BookingDateTimeStart >= DateTime.Now.Date)
                {
                    <td class = "highlight">
                        <a href ="@Url.Action("EditBooking", new{bookingid = bookinginfo.ID})" class = "tableLink">
                                <div class="floatLeft">
                                        <div class="date">
                                            <div class="month bkHighlight">
                                                @bookinginfo.BookingDateTimeStart.ToString("MMMM")
                                            </div>
                                            <div class="day">
                                                @bookinginfo.BookingDateTimeStart.Day.ToString()
                                            </div>
                                        </div>

                                </div>
                                <div class="listHead">
                                    @bookinginfo.StaffMember.Firstname @bookinginfo.StaffMember.Surname
                                </div>
                                
                                <div class="listSubHead">
                                    @bookinginfo.Destination<br />

                                    @bookinginfo.BookingDateTimeStart.ToString("t")
                                </div>
                        </a>
                        <input type="checkbox" id="@bookinginfo.ID" class="delete" name="deletecheck" />
                        @*<a href="@Url.Action("DeleteBooking", new{id = bookinginfo.ID})" class="delete" id="@bookinginfo.ID"></a>*@ 
                            @*set id so can access bookingid when deleting*@
                    </td>
                }
                else
                {

                    if (bookinginfo.JourneyEnds.Count > 0)//if journey end has been filled out
                    {
                        <td class="highlight">
                            <a href ="@Url.Action("EditBooking", new{bookingid = bookinginfo.ID})" class = "tableLink">
                                <div class="floatLeft">
                                        <div class="date">
                                            <div class="month bkHighlight">
                                                @bookinginfo.BookingDateTimeStart.ToString("MMMM")
                                            </div>
                                            <div class="day">
                                                @bookinginfo.BookingDateTimeStart.Day.ToString()
                                            </div>
                                        </div>

                                </div>
                                <div class="listHead">
                                    @bookinginfo.StaffMember.Firstname @bookinginfo.StaffMember.Surname<br />
                                    
                                </div>
                                <div class="listSubHead">
                                    @bookinginfo.Destination <br />
                                    @bookinginfo.BookingDateTimeStart.ToString("t")
                                </div>
                            </a>
                        </td>
                    }
                    else
                    {
                        <td class = "highlight">
                            <a href ="@Url.Action("EditBooking", new{bookingid = bookinginfo.ID})" class="tableLink" >
                                    <div class="floatLeft">
                                        <div class="date">
                                            <div class="month bkHighlight">
                                                @bookinginfo.BookingDateTimeStart.ToString("MMMM")
                                            </div>
                                            <div class="day">
                                                @bookinginfo.BookingDateTimeStart.Day.ToString()
                                            </div>
                                        </div>

                                    </div>
                                    
                                    <div class="listHead">
                                        @bookinginfo.StaffMember.Firstname @bookinginfo.StaffMember.Surname
                                        
                                        
                                    </div>
                                    <div class="listSubHead">
                                        @bookinginfo.Destination<br />
                                        @bookinginfo.BookingDateTimeStart.ToString("t")
                                    </div>
                                    
                                    <b>Journey End Due</b>
                                    
                            </a>
                            @*<input type="checkbox" id="@bookinginfo.ID" class="delete" name="deletecheck" />*@
                        </td>
                    }
                }

            </tr>

        }
    </tbody>
</table>
